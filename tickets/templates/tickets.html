{% extends 'base.html' %}
{% load bootstrap_tags %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-xs-6 col-md-4 col-md-offset-2">
            <h1>Tickets</h1>
        </div>
        <div class="col-xs-6 col-md-4">
            <a href="{% url 'new_ticket' %}"  class="btn btn-success button-centre-right">Create Ticket</a>
        </div>
    </div>
    <div class="row">
        <form action="" method="get">
            {{ filter.form | as_bootstrap }}
            <button type="submit" class="btn btn-default filter-button">Filter</button>
        </form>    
    </div>
</div>    
<div class="container">
    <div class="row">
        {% for ticket in filter.qs %}
        <div class="col-xs-12 col-md-8 col-md-offset-2">
            <div class="thumbnail">
                <div class="caption">
                    <div class="row">
                        <div class="col-xs-12">
                            <h3 class="ticket-title">{{ ticket.title }}</h3>    
                        </div>
                        <hr class="break-line">
                        <div class="col-xs-12">
                            <span class="type-color">{{ticket.ticket_type}}</span>
                            <span class="status-color">{{ticket.status}}</span>
                            <span><strong>Votes:</strong> {{ ticket.votes }}</span>
                        </div>
                    </div>
                    <hr class="break-line">
                    <p>{{ ticket.content|truncatewords:30 }}</p>
                    <p><a href="{% url 'ticket_detail' ticket.id %}"  class="btn btn-default">Read more</a></p>
                    <hr class="break-line">
                    <div class="row">
                        <div class="col-xs-12 col-md-6">
                            <p class="text-center"><small><strong>Updated on:</strong> {{ ticket.update_date }}</small></p>    
                        </div>
                        <div class="col-xs-12 col-md-6">
                            <p class="text-center"><small><strong>Published on:</strong> {{ ticket.published_date }}</small></p>    
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>    
</div> 
{% endblock %}